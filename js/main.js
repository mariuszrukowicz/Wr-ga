!function(c){var n={};function t(l){if(n[l])return n[l].exports;var e=n[l]={i:l,l:!1,exports:{}};return c[l].call(e.exports,e,e.exports,t),e.l=!0,e.exports}t.m=c,t.c=n,t.d=function(c,n,l){t.o(c,n)||Object.defineProperty(c,n,{enumerable:!0,get:l})},t.r=function(c){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},t.t=function(c,n){if(1&n&&(c=t(c)),8&n)return c;if(4&n&&"object"==typeof c&&c&&c.__esModule)return c;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:c}),2&n&&"string"!=typeof c)for(var e in c)t.d(l,e,function(n){return c[n]}.bind(null,e));return l},t.n=function(c){var n=c&&c.__esModule?function(){return c.default}:function(){return c};return t.d(n,"a",n),n},t.o=function(c,n){return Object.prototype.hasOwnProperty.call(c,n)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";eval("\r\n\r\n// service worker registration - remove if you're not going to use it\r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', function() {\r\n    navigator.serviceWorker.register('serviceworker.js').then(function(registration) {\r\n      // Registration was successful\r\n      console.log('ServiceWorker registration successful with scope: ', registration.scope);\r\n    }, function(err) {\r\n      // registration failed :(\r\n      console.log('ServiceWorker registration failed: ', err);\r\n    });\r\n  });\r\n}\r\n\r\n// place your code below\r\n\r\n\r\njQuery(document).ready(function() {\r\n\t\r\n\t\"use strict\";\r\n\t\r\n\t/* ========== Sticky on scroll ========== */\r\n\tfunction stickyNav() {\r\n\r\n\t\tvar scrollTop = $(window).scrollTop(),\r\n\t\t\tnoSticky = $('.no-sticky'),\r\n\t\t\tviewportSm = $('.viewport-sm'),\r\n\t\t\tviewportLg = $('.viewport-lg'),\r\n\t\t\tviewportLgBody = viewportLg.parent('body'),\r\n\t\t\tviewportLgNosticky = $('.viewport-lg.no-sticky'),\r\n\t\t\tviewportLgNostickyBody = viewportLgNosticky.parent('body'),\r\n\t\t\tviewportLgLogo = viewportLg.find('.logo img'),\r\n\t\t\tviewportLgNostickyLogo = viewportLgNosticky.find('.logo img'),\r\n\t\t\theaderTransparentLg = $('.viewport-lg.header-transparent'),\r\n\t\t\theaderTransparentLgNosticky = $('.viewport-lg.header-transparent.no-sticky'),\r\n\t\t\theaderTransparentLgBody = headerTransparentLg.parent('body'),\r\n\t\t\theaderOpacityLg = $('.viewport-lg.header-opacity'),\r\n\t\t\theaderOpacityLgNosticky = $('.viewport-lg.header-opacity.no-sticky'),\r\n\t\t\theaderOpacityLgBody = headerOpacityLg.parent('body');\r\n\r\n\t\tif (scrollTop > navikHeaderHeight) {\r\n\t\t\tnavikHeader.addClass('sticky');\r\n\t\t\tviewportLgLogo.attr('src', stickyLogoSrc);\r\n\t\t\tviewportLgNostickyLogo.attr('src', logoSrc);\r\n\t\t\theaderTransparentLg.removeClass('header-transparent-on');\r\n\t\t\theaderOpacityLg.removeClass('header-opacity-on');\r\n\t\t\theaderTransparentLgNosticky.addClass('header-transparent-on');\r\n\t\t\theaderOpacityLgNosticky.addClass('header-opacity-on');\r\n\t\t\tviewportLgBody.css(\"margin-top\", navikHeaderHeight);\r\n\t\t\tviewportLg.css(\"margin-top\", -navikHeaderHeight);\r\n\t\t} else {\r\n\t\t\tnavikHeader.removeClass('sticky');\r\n\t\t\tviewportLgLogo.attr('src', logoSrc);\r\n\t\t\theaderTransparentLg.addClass('header-transparent-on');\r\n\t\t\theaderOpacityLg.addClass('header-opacity-on');\r\n\t\t\tviewportLgBody.add(viewportLg).css(\"margin-top\", \"0\");\r\n\t\t}\r\n\r\n\t\tnoSticky.removeClass('sticky');\r\n\t\tviewportSm.removeClass('sticky');\r\n\t\t\r\n\t\theaderTransparentLg.add(headerTransparentLgBody).add(headerOpacityLg).add(headerOpacityLgBody).add(viewportLgNostickyBody).add(viewportLgNosticky).css(\"margin-top\", \"0\");\r\n\r\n\t\tvar logoCenterWidth = $('.logoCenter .logo img').width(),\r\n\t\t\tmenuCenterOneWidth = $('.center-menu-1 .navik-menu').width(),\r\n\t\t\tmenuCenterOneListMenu = $('.center-menu-1 .navik-menu > ul'),\r\n\t\t\tmenuCenterOneListWidth = menuCenterOneWidth - logoCenterWidth;\r\n\r\n\t\tif ($(window).width() < 1200) {\r\n\t\t\tmenuCenterOneListMenu.outerWidth( menuCenterOneWidth );\r\n\t\t} else {\r\n\t\t\tmenuCenterOneListMenu.outerWidth( menuCenterOneListWidth / 2 );\r\n\t\t}\r\n\r\n\t\t$('.logoCenter').width(logoCenterWidth);\r\n\t\t\r\n\t}\r\n\r\n\t/* ========== Menu overlay transition ========== */\r\n\tfunction overlayMenuTransition() {\r\n\t\tvar overlayMenuFirst = $('.navik-menu-overlay > ul > li:first-child'),\r\n\t\t\toverlayMenuList = $('.navik-menu-overlay > ul > li');\r\n\r\n\t\toverlayMenuFirst.attr('data-delay', '0');\r\n\r\n\t\toverlayMenuList.each(function(){\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\toverlayMenuNext = $this.next('li'),\r\n\t\t\t\tmenuDataDelay = $this.attr('data-delay'),\r\n\t\t\t\tmenuDataDelayNext = parseInt(menuDataDelay) + parseInt('100');\r\n\r\n\t\t\toverlayMenuNext.attr('data-delay', menuDataDelayNext);\r\n\r\n\t\t\t$this.delay(menuDataDelay).queue(function(next) {\r\n\t\t\t\t$(this).addClass(\"menuSlideIn\");\r\n\t\t\t\tnext();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/* ========== Horizontal navigation menu ========== */\r\n\tif ($('.navik-header').length) {\r\n\r\n\t\tvar navikHeader = $('.navik-header'),\r\n\t\t\tnavikHeaderHeight = navikHeader.height(),\r\n\t\t\tlogo = navikHeader.find('.logo'),\r\n\t\t\tlogoImg = logo.find('img'),\r\n\t\t\tlogoSrc = logoImg.attr('src'),\r\n\t\t\tlogoClone = logo.clone(),\r\n\t\t\tmobileLogoSrc = logo.data('mobile-logo'),\r\n\t\t\tstickyLogoSrc = logo.data('sticky-logo'),\r\n\t\t\tburgerMenu = navikHeader.find('.burger-menu'),\r\n\t\t\tnavikMenuListWrapper = $('.navik-menu > ul'),\r\n\t\t\tnavikMenuListDropdown = $('.navik-menu ul li:has(ul)'),\r\n\t\t\theaderShadow = $('.navik-header.header-shadow'),\r\n\t\t\theaderTransparent = $('.navik-header.header-transparent'),\r\n\t\t\theaderOpacity = $('.navik-header.header-opacity'),\r\n\t\t\tmegaMenuFullwidthContainer = $('.mega-menu-fullwidth .mega-menu-container');\r\n\r\n\t\t/* ========== Center menu 1 ========== */\r\n\t\t$('.center-menu-1 .navik-menu > ul:first-child').after('<div class=\"logoCenter\"></div>');\r\n\t\t$('.logoCenter').html(logoClone);\r\n\r\n\t\t/* ========== Mega menu fullwidth wrap container ========== */\r\n\t\tmegaMenuFullwidthContainer.each(function(){\r\n\t\t\t$(this).children().wrapAll('<div class=\"mega-menu-fullwidth-container\"></div>');\r\n\t\t});\r\n\r\n\t\t/* ========== Window resize ========== */\r\n\t\t$(window).on(\"resize\", function() {\r\n\r\n\t\t\tvar megaMenuContainer = $('.mega-menu-fullwidth-container');\r\n\r\n\t\t\tif ($(window).width() < 1200) {\r\n\r\n\t\t\t\tlogoImg.attr('src', mobileLogoSrc);\r\n\t\t\t\tnavikHeader.removeClass('viewport-lg');\r\n\t\t\t\tnavikHeader.addClass('viewport-sm');\r\n\t\t\t\theaderTransparent.removeClass('header-transparent-on');\r\n\t\t\t\theaderOpacity.removeClass('header-opacity-on');\r\n\t\t\t\tmegaMenuContainer.removeClass('container');\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlogoImg.attr('src', logoSrc);\r\n\t\t\t\tnavikHeader.removeClass('viewport-sm');\r\n\t\t\t\tnavikHeader.addClass('viewport-lg');\r\n\t\t\t\theaderTransparent.addClass('header-transparent-on');\r\n\t\t\t\theaderOpacity.addClass('header-opacity-on');\r\n\t\t\t\tmegaMenuContainer.addClass('container');\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstickyNav();\r\n\r\n\t\t}).resize();\r\n\r\n\t\t/* ========== Dropdown Menu Toggle ========== */\r\n\t\tburgerMenu.on(\"click\", function(){\r\n\t\t\t$(this).toggleClass('menu-open');\r\n\t\t\tnavikMenuListWrapper.slideToggle(300);\r\n\t\t});\r\n\t\t\r\n\t\tnavikMenuListDropdown.each(function(){\r\n\t\t\t$(this).append( '<span class=\"dropdown-plus\"></span>' );\r\n\t\t\t$(this).addClass('dropdown_menu');\r\n\t\t});\r\n\t\t\r\n\t\t$('.dropdown-plus').on(\"click\", function(){\r\n\t\t\t$(this).prev('ul').slideToggle(300);\r\n\t\t\t$(this).toggleClass('dropdown-open');\r\n\t\t});\r\n\t\t\r\n\t\t$('.dropdown_menu a').append('<span></span>');\r\n\r\n\t\t/* ========== Added header shadow ========== */\r\n\t\theaderShadow.append('<div class=\"header-shadow-wrapper\"></div>');\r\n\r\n\t\t/* ========== Sticky on scroll ========== */\r\n\t\t$(window).on(\"scroll\", function() {\r\n\t\t\tstickyNav();\r\n\t\t}).scroll();\r\n\r\n\t\t/* ========== Menu hover transition ========== */\r\n\t\tvar listMenuHover4 = $('.navik-menu.menu-hover-4 > ul > li > a');\r\n\t\tlistMenuHover4.append('<div class=\"hover-transition\"></div>');\r\n\r\n\t}\r\n\r\n\t/* ========== Overlay navigation menu ========== */\r\n\tif ($('.navik-header-overlay').length) {\r\n\r\n\t\tvar navikHeaderOverlay = $('.navik-header-overlay'),\r\n\t\t\tnavikMenuOverlay = $('.navik-menu-overlay'),\r\n\t\t\tburgerMenuOverlay = navikHeaderOverlay.find('.burger-menu'),\r\n\t\t\tlineMenuOverlay = navikHeaderOverlay.find('.line-menu'),\r\n\t\t\tmenuOverlayLogo = navikHeaderOverlay.find('.logo'),\r\n\t\t\toverlayLogoClone = menuOverlayLogo.clone(),\r\n\t\t\tmenuWrapperLogoSrc = menuOverlayLogo.data('overlay-logo'),\r\n\t\t\tmenuOverlayListDropdown = $('.navik-menu-overlay > ul > li:has(ul)'),\r\n\t\t\tmenuOverlayLink = $('.navik-menu-overlay > ul > li > a'),\r\n\t\t\tmenuSlide = $('.navik-header-overlay.menu-slide'),\r\n\t\t\tmenuSlideSubmenuLink = menuSlide.find('.navik-menu-overlay > ul ul a'),\r\n\t\t\tmenuSlideSubmenuDropdown = menuSlide.find('.navik-menu-overlay > ul > li > ul li:has(ul)'),\r\n\t\t\tmenuSocialMedia = navikMenuOverlay.next('.menu-social-media'),\r\n\t\t\tsubmenuVerticalListItem = $('.submenu-vertical > ul > li > ul li:has(ul)'),\r\n\t\t\tsubmenuVerticalLink = $('.submenu-vertical > ul > li > ul a');\r\n\r\n\t\tlineMenuOverlay.wrapAll('<span></span>');\r\n\t\tmenuOverlayLink.wrap('<div class=\"menu-overlay-link\"></div>');\r\n\t\tsubmenuVerticalLink.wrap('<div class=\"menu-overlay-link\"></div>');\r\n\t\tmenuSlideSubmenuLink.wrap('<div class=\"menu-overlay-link\"></div>');\r\n\r\n\t\t/* ========== Submenu Toggle ========== */\r\n\t\tmenuOverlayListDropdown.each(function(){\r\n\t\t\tvar menuOverlayDropdownLink = $(this).children('.menu-overlay-link');\r\n\t\t\tmenuOverlayDropdownLink.prepend( '<span class=\"overlay-dropdown-plus\"></span>' );\r\n\t\t\t$(this).addClass('overlay_dropdown_menu');\r\n\t\t});\r\n\r\n\t\tsubmenuVerticalListItem.each(function(){\r\n\t\t\tvar submenuVerticalDropdownLink = $(this).children('.menu-overlay-link');\r\n\t\t\tsubmenuVerticalDropdownLink.prepend( '<span class=\"overlay-dropdown-plus\"></span>' );\r\n\t\t\t$(this).addClass('overlay_dropdown_menu');\r\n\t\t});\r\n\r\n\t\tmenuSlideSubmenuDropdown.each(function(){\r\n\t\t\tvar submenuVerticalDropdownLink = $(this).children('.menu-overlay-link');\r\n\t\t\tsubmenuVerticalDropdownLink.prepend( '<span class=\"overlay-dropdown-plus\"></span>' );\r\n\t\t\t$(this).addClass('overlay_dropdown_menu');\r\n\t\t});\r\n\r\n\t\t$('.overlay_dropdown_menu > ul').addClass('overlay-submenu-close');\r\n\t\t\r\n\t\t$('.overlay-dropdown-plus').on(\"click\", function(){\r\n\t\t\tvar $thisParent = $(this).parent('.menu-overlay-link');\r\n\t\t\t$thisParent.next('ul').slideToggle(300).toggleClass('overlay-submenu-close');\r\n\t\t\t$(this).toggleClass('overlay-dropdown-open');\r\n\t\t});\r\n\r\n\t\tnavikMenuOverlay.add(menuSocialMedia).wrapAll('<div class=\"nav-menu-wrapper\"></div>');\r\n\r\n\t\tvar overlayNavMenuWrapper = $('.nav-menu-wrapper');\r\n\r\n\t\toverlayNavMenuWrapper.prepend(overlayLogoClone);\r\n\t\toverlayNavMenuWrapper.find('.logo img').attr('src', menuWrapperLogoSrc);\r\n\r\n\t\tvar menuOverlayHover = $('.navik-menu-overlay > ul > .overlay_dropdown_menu > ul');\r\n\r\n\t\tmenuOverlayHover.each(function(){\r\n\t\t\t$(this).on(\"mouseenter\", function () {\r\n\t\t\t\t$(this).parents(\"li\").addClass(\"overlay-menu-hover\");\r\n\t\t\t});\r\n\t\t\t$(this).on(\"mouseleave\", function () {\r\n\t\t\t\t$(this).parents(\"li\").removeClass(\"overlay-menu-hover\");\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t/* ========== Menu overlay open ========== */\r\n\t\tburgerMenuOverlay.on(\"click\", function(){\r\n\r\n\t\t\tvar overlayMenuList = $('.navik-menu-overlay > ul > li');\r\n\r\n\t\t\t$(this).toggleClass('menu-open');\r\n\t\t\toverlayNavMenuWrapper.toggleClass('overlay-menu-open');\r\n\t\t\toverlayMenuList.removeClass(\"menuSlideIn\");\r\n\t\t\t\r\n\t\t\tif ($(this).hasClass(\"menu-open\")) {\r\n\t\t\t\toverlayMenuTransition();\r\n\t\t\t\toverlayMenuList.removeClass(\"menuSlideOut\").addClass(\"menuFade\");\r\n\t\t\t}\r\n\r\n\t\t\tif (!$(this).hasClass(\"menu-open\")) {\r\n\t\t\t\toverlayMenuList.addClass(\"menuSlideOut\").removeClass(\"menuFade\");\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\t/* ========== Menu slide settings ========== */\r\n\t\tvar menuSlideNavWrapper = menuSlide.find('.nav-menu-wrapper'),\r\n\t\t\tmenuSlideNavLogo = menuSlideNavWrapper.find('.logo');\r\n\r\n\t\tif (navikHeaderOverlay.hasClass('menu-slide')){\r\n\t\t\tnavikHeaderOverlay.removeClass('overlay-center-menu');\r\n\t\t}\r\n\r\n\t\tmenuSlideNavLogo.remove();\r\n\t\tmenuSlideNavWrapper.after('<div class=\"slidemenu-bg-overlay\"></div>');\r\n\r\n\t\t$('.slidemenu-bg-overlay').on(\"click\", function(){\r\n\t\t\tmenuSlideNavWrapper.removeClass('overlay-menu-open');\r\n\t\t\tburgerMenuOverlay.removeClass('menu-open');\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/* ========== Fixed sidebar menu ========== */\r\n\tif ($('.navik-fixed-sidebar').length) {\r\n\t\tvar navikFixedSidebar = $('.navik-fixed-sidebar'),\r\n\t\t\tnavikMenuFixed = $('.navik-menu-fixed'),\r\n\t\t\tnavikSideContent = $('.navik-side-content'),\r\n\t\t\tlogoFixedSidebar = navikFixedSidebar.find('.logo'),\r\n\t\t\tlogoClone = logoFixedSidebar.clone(),\r\n\t\t\tburgerMenuFixedSidebar = navikFixedSidebar.find('.burger-menu'),\r\n\t\t\tburgerMenuDetach = burgerMenuFixedSidebar.detach(),\r\n\t\t\tnavikFixedDropdown = navikMenuFixed.find('li:has(ul)');\r\n\r\n\t\tnavikFixedSidebar.parent('body').addClass('body-fixed-sidebar');\r\n\t\tnavikFixedSidebar.after('<div class=\"fixedsidebar-bg-overlay\"></div>').after(burgerMenuDetach);\r\n\t\tnavikSideContent.prepend(logoClone);\r\n\r\n\t\t$('.navik-fixed-sidebar .logo, .navik-menu-fixed').wrapAll('<div class=\"fixed-menu-wrap\"></div>');\r\n\r\n\t\tvar burgerMenuMove = navikFixedSidebar.next('.burger-menu'),\r\n\t\t\tfixedSidebarlineMenu = burgerMenuMove.find('.line-menu');\r\n\r\n\t\tfixedSidebarlineMenu.wrapAll('<span></span>');\r\n\r\n\t\t/* ========== Side menu open on mobile ========== */\r\n\t\tburgerMenuMove.on(\"click\", function(){\r\n\t\t\t$(this).toggleClass('menu-open');\r\n\t\t\tnavikFixedSidebar.toggleClass('fixed-sidebar-open');\r\n\t\t});\r\n\r\n\t\t$('.fixedsidebar-bg-overlay').on(\"click\", function(){\r\n\t\t\tnavikFixedSidebar.removeClass('fixed-sidebar-open');\r\n\t\t\tburgerMenuMove.removeClass('menu-open');\r\n\t\t});\r\n\r\n\t\t/* ========== Submenu collapse ========== */\r\n\t\tnavikFixedDropdown.each(function(){\r\n\t\t\t$(this).append( '<span class=\"overlay-dropdown-plus\"></span>' );\r\n\t\t});\r\n\r\n\t\t$('.overlay-dropdown-plus').on(\"click\", function(){\r\n\t\t\t$(this).prev('ul').slideToggle(300).toggleClass('submenu-collapse');\r\n\t\t\t$(this).toggleClass('overlay-dropdown-open');\r\n\t\t});\r\n\t}\r\n\r\n\t/* ========== Menu icon color ========== */\r\n\t$('.navik-menu-icon').css('color', function () {\r\n\t\tvar iconColorAttr = $(this).data('fa-color');\r\n\t\treturn iconColorAttr;\r\n\t});\r\n\r\n});\r\n(function($) {\r\n\r\n\t// Menu filter\r\n\t$(\"#menu-filters li a\").click(function() {\r\n\t  $(\"#menu-filters li a\").removeClass('active');\r\n\t  $(this).addClass('active');\r\n  \r\n\t  var selectedFilter = $(this).data(\"filter\");\r\n\t  //  $(\"#menu-wrapper\").fadeTo(100, 0);\r\n  \r\n\t  $(\".menu-restaurant\").fadeOut();\r\n  \r\n\t  setTimeout(function() {\r\n\t\t$(selectedFilter).slideDown();\r\n\t\t//$(\"#menu-wrapper\").fadeTo(300, 1);\r\n\t  }, 300);\r\n\t});\r\n  \r\n\t})(jQuery);\r\n  \r\n   \r\n  // post\r\n\r\n  {\r\n    const form = document.querySelector('#contactForm');\r\n    const inputs = form.querySelectorAll('input[required], textarea[required], select[required]');\r\n\r\n    //wyłączamy domyślną walidację\r\n    form.setAttribute('novalidate', true);\r\n\r\n    const displayFieldError = function(elem) {\r\n        const fieldRow = elem.closest('.form-row');\r\n        const fieldError = fieldRow.querySelector('.field-error');\r\n        if (fieldError === null) {\r\n            const errorText = elem.dataset.error;\r\n            const divError = document.createElement('div');\r\n            divError.classList.add('field-error');\r\n            divError.innerText = errorText;\r\n            fieldRow.appendChild(divError);\r\n        }\r\n    };\r\n\r\n    const hideFieldError = function(elem) {\r\n        const fieldRow = elem.closest('.form-row');\r\n        const fieldError = fieldRow.querySelector('.field-error');\r\n        if (fieldError !== null) {\r\n            fieldError.remove();\r\n        }\r\n    };\r\n\r\n    [...inputs].forEach(elem => {\r\n        elem.addEventListener('input', function() {\r\n            if (!this.checkValidity()) {\r\n                this.classList.add('error');\r\n            } else {\r\n                this.classList.remove('error');\r\n                hideFieldError(this);\r\n            }\r\n        });\r\n\r\n        if (elem.type === \"checkbox\") {\r\n            elem.addEventListener('click', function() {\r\n                const formRow = this.closest('.form-row');\r\n                if (this.checked) {\r\n                    this.classList.remove('error');\r\n                    hideFieldError(this);\r\n                } else {\r\n                    this.classList.add('error');\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    const checkFieldsErrors = function(elements) {\r\n        //ustawiamy zmienną na true. Następnie robimy pętlę po wszystkich polach\r\n        //jeżeli któreś z pól jest błędne, przełączamy zmienną na false.\r\n        let fieldsAreValid = true;\r\n\r\n        [...elements].forEach(elem => {\r\n            if (elem.checkValidity()) {\r\n                hideFieldError(elem);\r\n                elem.classList.remove('error');\r\n            } else {\r\n                displayFieldError(elem);\r\n                elem.classList.add('error');\r\n                fieldsAreValid = false;\r\n            }\r\n        });\r\n\r\n        return fieldsAreValid;\r\n    };\r\n\r\n    \r\n}\r\n\r\n\r\n\r\n\r\n{\r\n    const form = document.querySelector('#contactForm');\r\n    const inputs = form.querySelectorAll('input[required], textarea[required], select[required]');\r\n\r\n    //wyłączamy domyślną walidację\r\n    form.setAttribute('novalidate', true);\r\n\r\n    const displayFieldError = function(elem) {\r\n        const fieldRow = elem.closest('.form-row');\r\n        const fieldError = fieldRow.querySelector('.field-error');\r\n        if (fieldError === null) {\r\n            const errorText = elem.dataset.error;\r\n            const divError = document.createElement('div');\r\n            divError.classList.add('field-error');\r\n            divError.innerText = errorText;\r\n            fieldRow.appendChild(divError);\r\n        }\r\n    };\r\n\r\n    const hideFieldError = function(elem) {\r\n        const fieldRow = elem.closest('.form-row');\r\n        const fieldError = fieldRow.querySelector('.field-error');\r\n        if (fieldError !== null) {\r\n            fieldError.remove();\r\n        }\r\n    };\r\n\r\n    [...inputs].forEach(elem => {\r\n        elem.addEventListener('input', function() {\r\n            if (!this.checkValidity()) {\r\n                this.classList.add('error');\r\n            } else {\r\n                this.classList.remove('error');\r\n                hideFieldError(this);\r\n            }\r\n        });\r\n\r\n        if (elem.type === \"checkbox\") {\r\n            elem.addEventListener('click', function() {\r\n                const formRow = this.closest('.form-row');\r\n                if (this.checked) {\r\n                    this.classList.remove('error');\r\n                    hideFieldError(this);\r\n                } else {\r\n                    this.classList.add('error');\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    const checkFieldsErrors = function(elements) {\r\n        //ustawiamy zmienną na true. Następnie robimy pętlę po wszystkich polach\r\n        //jeżeli któreś z pól jest błędne, przełączamy zmienną na false.\r\n        let fieldsAreValid = true;\r\n\r\n        [...elements].forEach(elem => {\r\n            if (elem.checkValidity()) {\r\n                hideFieldError(elem);\r\n                elem.classList.remove('error');\r\n            } else {\r\n                displayFieldError(elem);\r\n                elem.classList.add('error');\r\n                fieldsAreValid = false;\r\n            }\r\n        });\r\n\r\n        return fieldsAreValid;\r\n    };\r\n\r\n    form.addEventListener('submit', function(e) {\r\n        e.preventDefault();\r\n\r\n        //jeżeli wszystkie pola są poprawne...\r\n        if (checkFieldsErrors(inputs)) {\r\n            const elements = form.querySelectorAll('input:not(:disabled), textarea:not(:disabled), select:not(:disabled)');\r\n\r\n            const dataToSend = new FormData();\r\n            [...elements].forEach(el => dataToSend.append(el.name, el.value));\r\n\r\n            const url = form.getAttribute('action');\r\n            const method = form.getAttribute('method');\r\n\r\n            const submit = form.querySelector('[type=\"submit\"]');\r\n            submit.disabled = true;\r\n            submit.classList.add('element-is-busy');\r\n\r\n            fetch(url, {\r\n                method: method.toUpperCase(),\r\n                body: dataToSend\r\n            })\r\n            .then(ret => ret.json())\r\n            .then(ret => {\r\n                submit.disabled = false;\r\n                submit.classList.remove('element-is-busy');\r\n\r\n                if (ret.errors) {\r\n                    ret.errors.map(function(el) {\r\n                        return '[name=\"'+el+'\"]'\r\n                    });\r\n                    const selector = ret.errors.join(',');\r\n                    checkFieldsErrors(form.querySelectorAll(sekector));\r\n\r\n                } else {\r\n                    if (ret.status === 'ok') {\r\n                        //wyświetlamy komunikat powodzenia, cieszymy sie\r\n                        const div = document.createElement('div');\r\n                        div.classList.add('form-send-success');\r\n\r\n                        div.innerHTML = '<strong>Wiadomość została wysłana</strong><span>Dziękujemy za kontakt. Postaramy się odpowiedzieć jak najszybciej</span>';\r\n                        form.parentElement.insertBefore(div, form);\r\n                        form.remove();\r\n                    }\r\n\r\n                    if (ret.status === 'error') {\r\n                        //komunikat błędu, niepowodzenia\r\n                        const div = document.createElement('div');\r\n                        div.classList.add('send-error');\r\n                        div.innerText = 'Wysłanie wiadomości się nie powiodło';\r\n                    }\r\n                }\r\n            }).catch(_ => {\r\n                submit.disabled = false;\r\n                submit.classList.remove('element-is-busy');\r\n            });\r\n        }\r\n    });\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi5qcz85MjkxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7O0FBRUE7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTs7QUFFRixFQUFFOzs7QUFHRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOzs7QUFHQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbi8vIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiAtIHJlbW92ZSBpZiB5b3UncmUgbm90IGdvaW5nIHRvIHVzZSBpdFxyXG5cclxuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3NlcnZpY2V3b3JrZXIuanMnKS50aGVuKGZ1bmN0aW9uKHJlZ2lzdHJhdGlvbikge1xyXG4gICAgICAvLyBSZWdpc3RyYXRpb24gd2FzIHN1Y2Nlc3NmdWxcclxuICAgICAgY29uc29sZS5sb2coJ1NlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJywgcmVnaXN0cmF0aW9uLnNjb3BlKTtcclxuICAgIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAvLyByZWdpc3RyYXRpb24gZmFpbGVkIDooXHJcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICcsIGVycik7XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gcGxhY2UgeW91ciBjb2RlIGJlbG93XHJcblxyXG5cclxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuXHRcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHRcclxuXHQvKiA9PT09PT09PT09IFN0aWNreSBvbiBzY3JvbGwgPT09PT09PT09PSAqL1xyXG5cdGZ1bmN0aW9uIHN0aWNreU5hdigpIHtcclxuXHJcblx0XHR2YXIgc2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRub1N0aWNreSA9ICQoJy5uby1zdGlja3knKSxcclxuXHRcdFx0dmlld3BvcnRTbSA9ICQoJy52aWV3cG9ydC1zbScpLFxyXG5cdFx0XHR2aWV3cG9ydExnID0gJCgnLnZpZXdwb3J0LWxnJyksXHJcblx0XHRcdHZpZXdwb3J0TGdCb2R5ID0gdmlld3BvcnRMZy5wYXJlbnQoJ2JvZHknKSxcclxuXHRcdFx0dmlld3BvcnRMZ05vc3RpY2t5ID0gJCgnLnZpZXdwb3J0LWxnLm5vLXN0aWNreScpLFxyXG5cdFx0XHR2aWV3cG9ydExnTm9zdGlja3lCb2R5ID0gdmlld3BvcnRMZ05vc3RpY2t5LnBhcmVudCgnYm9keScpLFxyXG5cdFx0XHR2aWV3cG9ydExnTG9nbyA9IHZpZXdwb3J0TGcuZmluZCgnLmxvZ28gaW1nJyksXHJcblx0XHRcdHZpZXdwb3J0TGdOb3N0aWNreUxvZ28gPSB2aWV3cG9ydExnTm9zdGlja3kuZmluZCgnLmxvZ28gaW1nJyksXHJcblx0XHRcdGhlYWRlclRyYW5zcGFyZW50TGcgPSAkKCcudmlld3BvcnQtbGcuaGVhZGVyLXRyYW5zcGFyZW50JyksXHJcblx0XHRcdGhlYWRlclRyYW5zcGFyZW50TGdOb3N0aWNreSA9ICQoJy52aWV3cG9ydC1sZy5oZWFkZXItdHJhbnNwYXJlbnQubm8tc3RpY2t5JyksXHJcblx0XHRcdGhlYWRlclRyYW5zcGFyZW50TGdCb2R5ID0gaGVhZGVyVHJhbnNwYXJlbnRMZy5wYXJlbnQoJ2JvZHknKSxcclxuXHRcdFx0aGVhZGVyT3BhY2l0eUxnID0gJCgnLnZpZXdwb3J0LWxnLmhlYWRlci1vcGFjaXR5JyksXHJcblx0XHRcdGhlYWRlck9wYWNpdHlMZ05vc3RpY2t5ID0gJCgnLnZpZXdwb3J0LWxnLmhlYWRlci1vcGFjaXR5Lm5vLXN0aWNreScpLFxyXG5cdFx0XHRoZWFkZXJPcGFjaXR5TGdCb2R5ID0gaGVhZGVyT3BhY2l0eUxnLnBhcmVudCgnYm9keScpO1xyXG5cclxuXHRcdGlmIChzY3JvbGxUb3AgPiBuYXZpa0hlYWRlckhlaWdodCkge1xyXG5cdFx0XHRuYXZpa0hlYWRlci5hZGRDbGFzcygnc3RpY2t5Jyk7XHJcblx0XHRcdHZpZXdwb3J0TGdMb2dvLmF0dHIoJ3NyYycsIHN0aWNreUxvZ29TcmMpO1xyXG5cdFx0XHR2aWV3cG9ydExnTm9zdGlja3lMb2dvLmF0dHIoJ3NyYycsIGxvZ29TcmMpO1xyXG5cdFx0XHRoZWFkZXJUcmFuc3BhcmVudExnLnJlbW92ZUNsYXNzKCdoZWFkZXItdHJhbnNwYXJlbnQtb24nKTtcclxuXHRcdFx0aGVhZGVyT3BhY2l0eUxnLnJlbW92ZUNsYXNzKCdoZWFkZXItb3BhY2l0eS1vbicpO1xyXG5cdFx0XHRoZWFkZXJUcmFuc3BhcmVudExnTm9zdGlja3kuYWRkQ2xhc3MoJ2hlYWRlci10cmFuc3BhcmVudC1vbicpO1xyXG5cdFx0XHRoZWFkZXJPcGFjaXR5TGdOb3N0aWNreS5hZGRDbGFzcygnaGVhZGVyLW9wYWNpdHktb24nKTtcclxuXHRcdFx0dmlld3BvcnRMZ0JvZHkuY3NzKFwibWFyZ2luLXRvcFwiLCBuYXZpa0hlYWRlckhlaWdodCk7XHJcblx0XHRcdHZpZXdwb3J0TGcuY3NzKFwibWFyZ2luLXRvcFwiLCAtbmF2aWtIZWFkZXJIZWlnaHQpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0bmF2aWtIZWFkZXIucmVtb3ZlQ2xhc3MoJ3N0aWNreScpO1xyXG5cdFx0XHR2aWV3cG9ydExnTG9nby5hdHRyKCdzcmMnLCBsb2dvU3JjKTtcclxuXHRcdFx0aGVhZGVyVHJhbnNwYXJlbnRMZy5hZGRDbGFzcygnaGVhZGVyLXRyYW5zcGFyZW50LW9uJyk7XHJcblx0XHRcdGhlYWRlck9wYWNpdHlMZy5hZGRDbGFzcygnaGVhZGVyLW9wYWNpdHktb24nKTtcclxuXHRcdFx0dmlld3BvcnRMZ0JvZHkuYWRkKHZpZXdwb3J0TGcpLmNzcyhcIm1hcmdpbi10b3BcIiwgXCIwXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5vU3RpY2t5LnJlbW92ZUNsYXNzKCdzdGlja3knKTtcclxuXHRcdHZpZXdwb3J0U20ucmVtb3ZlQ2xhc3MoJ3N0aWNreScpO1xyXG5cdFx0XHJcblx0XHRoZWFkZXJUcmFuc3BhcmVudExnLmFkZChoZWFkZXJUcmFuc3BhcmVudExnQm9keSkuYWRkKGhlYWRlck9wYWNpdHlMZykuYWRkKGhlYWRlck9wYWNpdHlMZ0JvZHkpLmFkZCh2aWV3cG9ydExnTm9zdGlja3lCb2R5KS5hZGQodmlld3BvcnRMZ05vc3RpY2t5KS5jc3MoXCJtYXJnaW4tdG9wXCIsIFwiMFwiKTtcclxuXHJcblx0XHR2YXIgbG9nb0NlbnRlcldpZHRoID0gJCgnLmxvZ29DZW50ZXIgLmxvZ28gaW1nJykud2lkdGgoKSxcclxuXHRcdFx0bWVudUNlbnRlck9uZVdpZHRoID0gJCgnLmNlbnRlci1tZW51LTEgLm5hdmlrLW1lbnUnKS53aWR0aCgpLFxyXG5cdFx0XHRtZW51Q2VudGVyT25lTGlzdE1lbnUgPSAkKCcuY2VudGVyLW1lbnUtMSAubmF2aWstbWVudSA+IHVsJyksXHJcblx0XHRcdG1lbnVDZW50ZXJPbmVMaXN0V2lkdGggPSBtZW51Q2VudGVyT25lV2lkdGggLSBsb2dvQ2VudGVyV2lkdGg7XHJcblxyXG5cdFx0aWYgKCQod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xyXG5cdFx0XHRtZW51Q2VudGVyT25lTGlzdE1lbnUub3V0ZXJXaWR0aCggbWVudUNlbnRlck9uZVdpZHRoICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRtZW51Q2VudGVyT25lTGlzdE1lbnUub3V0ZXJXaWR0aCggbWVudUNlbnRlck9uZUxpc3RXaWR0aCAvIDIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkKCcubG9nb0NlbnRlcicpLndpZHRoKGxvZ29DZW50ZXJXaWR0aCk7XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdC8qID09PT09PT09PT0gTWVudSBvdmVybGF5IHRyYW5zaXRpb24gPT09PT09PT09PSAqL1xyXG5cdGZ1bmN0aW9uIG92ZXJsYXlNZW51VHJhbnNpdGlvbigpIHtcclxuXHRcdHZhciBvdmVybGF5TWVudUZpcnN0ID0gJCgnLm5hdmlrLW1lbnUtb3ZlcmxheSA+IHVsID4gbGk6Zmlyc3QtY2hpbGQnKSxcclxuXHRcdFx0b3ZlcmxheU1lbnVMaXN0ID0gJCgnLm5hdmlrLW1lbnUtb3ZlcmxheSA+IHVsID4gbGknKTtcclxuXHJcblx0XHRvdmVybGF5TWVudUZpcnN0LmF0dHIoJ2RhdGEtZGVsYXknLCAnMCcpO1xyXG5cclxuXHRcdG92ZXJsYXlNZW51TGlzdC5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyksXHJcblx0XHRcdFx0b3ZlcmxheU1lbnVOZXh0ID0gJHRoaXMubmV4dCgnbGknKSxcclxuXHRcdFx0XHRtZW51RGF0YURlbGF5ID0gJHRoaXMuYXR0cignZGF0YS1kZWxheScpLFxyXG5cdFx0XHRcdG1lbnVEYXRhRGVsYXlOZXh0ID0gcGFyc2VJbnQobWVudURhdGFEZWxheSkgKyBwYXJzZUludCgnMTAwJyk7XHJcblxyXG5cdFx0XHRvdmVybGF5TWVudU5leHQuYXR0cignZGF0YS1kZWxheScsIG1lbnVEYXRhRGVsYXlOZXh0KTtcclxuXHJcblx0XHRcdCR0aGlzLmRlbGF5KG1lbnVEYXRhRGVsYXkpLnF1ZXVlKGZ1bmN0aW9uKG5leHQpIHtcclxuXHRcdFx0XHQkKHRoaXMpLmFkZENsYXNzKFwibWVudVNsaWRlSW5cIik7XHJcblx0XHRcdFx0bmV4dCgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyogPT09PT09PT09PSBIb3Jpem9udGFsIG5hdmlnYXRpb24gbWVudSA9PT09PT09PT09ICovXHJcblx0aWYgKCQoJy5uYXZpay1oZWFkZXInKS5sZW5ndGgpIHtcclxuXHJcblx0XHR2YXIgbmF2aWtIZWFkZXIgPSAkKCcubmF2aWstaGVhZGVyJyksXHJcblx0XHRcdG5hdmlrSGVhZGVySGVpZ2h0ID0gbmF2aWtIZWFkZXIuaGVpZ2h0KCksXHJcblx0XHRcdGxvZ28gPSBuYXZpa0hlYWRlci5maW5kKCcubG9nbycpLFxyXG5cdFx0XHRsb2dvSW1nID0gbG9nby5maW5kKCdpbWcnKSxcclxuXHRcdFx0bG9nb1NyYyA9IGxvZ29JbWcuYXR0cignc3JjJyksXHJcblx0XHRcdGxvZ29DbG9uZSA9IGxvZ28uY2xvbmUoKSxcclxuXHRcdFx0bW9iaWxlTG9nb1NyYyA9IGxvZ28uZGF0YSgnbW9iaWxlLWxvZ28nKSxcclxuXHRcdFx0c3RpY2t5TG9nb1NyYyA9IGxvZ28uZGF0YSgnc3RpY2t5LWxvZ28nKSxcclxuXHRcdFx0YnVyZ2VyTWVudSA9IG5hdmlrSGVhZGVyLmZpbmQoJy5idXJnZXItbWVudScpLFxyXG5cdFx0XHRuYXZpa01lbnVMaXN0V3JhcHBlciA9ICQoJy5uYXZpay1tZW51ID4gdWwnKSxcclxuXHRcdFx0bmF2aWtNZW51TGlzdERyb3Bkb3duID0gJCgnLm5hdmlrLW1lbnUgdWwgbGk6aGFzKHVsKScpLFxyXG5cdFx0XHRoZWFkZXJTaGFkb3cgPSAkKCcubmF2aWstaGVhZGVyLmhlYWRlci1zaGFkb3cnKSxcclxuXHRcdFx0aGVhZGVyVHJhbnNwYXJlbnQgPSAkKCcubmF2aWstaGVhZGVyLmhlYWRlci10cmFuc3BhcmVudCcpLFxyXG5cdFx0XHRoZWFkZXJPcGFjaXR5ID0gJCgnLm5hdmlrLWhlYWRlci5oZWFkZXItb3BhY2l0eScpLFxyXG5cdFx0XHRtZWdhTWVudUZ1bGx3aWR0aENvbnRhaW5lciA9ICQoJy5tZWdhLW1lbnUtZnVsbHdpZHRoIC5tZWdhLW1lbnUtY29udGFpbmVyJyk7XHJcblxyXG5cdFx0LyogPT09PT09PT09PSBDZW50ZXIgbWVudSAxID09PT09PT09PT0gKi9cclxuXHRcdCQoJy5jZW50ZXItbWVudS0xIC5uYXZpay1tZW51ID4gdWw6Zmlyc3QtY2hpbGQnKS5hZnRlcignPGRpdiBjbGFzcz1cImxvZ29DZW50ZXJcIj48L2Rpdj4nKTtcclxuXHRcdCQoJy5sb2dvQ2VudGVyJykuaHRtbChsb2dvQ2xvbmUpO1xyXG5cclxuXHRcdC8qID09PT09PT09PT0gTWVnYSBtZW51IGZ1bGx3aWR0aCB3cmFwIGNvbnRhaW5lciA9PT09PT09PT09ICovXHJcblx0XHRtZWdhTWVudUZ1bGx3aWR0aENvbnRhaW5lci5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdCQodGhpcykuY2hpbGRyZW4oKS53cmFwQWxsKCc8ZGl2IGNsYXNzPVwibWVnYS1tZW51LWZ1bGx3aWR0aC1jb250YWluZXJcIj48L2Rpdj4nKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qID09PT09PT09PT0gV2luZG93IHJlc2l6ZSA9PT09PT09PT09ICovXHJcblx0XHQkKHdpbmRvdykub24oXCJyZXNpemVcIiwgZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR2YXIgbWVnYU1lbnVDb250YWluZXIgPSAkKCcubWVnYS1tZW51LWZ1bGx3aWR0aC1jb250YWluZXInKTtcclxuXHJcblx0XHRcdGlmICgkKHdpbmRvdykud2lkdGgoKSA8IDEyMDApIHtcclxuXHJcblx0XHRcdFx0bG9nb0ltZy5hdHRyKCdzcmMnLCBtb2JpbGVMb2dvU3JjKTtcclxuXHRcdFx0XHRuYXZpa0hlYWRlci5yZW1vdmVDbGFzcygndmlld3BvcnQtbGcnKTtcclxuXHRcdFx0XHRuYXZpa0hlYWRlci5hZGRDbGFzcygndmlld3BvcnQtc20nKTtcclxuXHRcdFx0XHRoZWFkZXJUcmFuc3BhcmVudC5yZW1vdmVDbGFzcygnaGVhZGVyLXRyYW5zcGFyZW50LW9uJyk7XHJcblx0XHRcdFx0aGVhZGVyT3BhY2l0eS5yZW1vdmVDbGFzcygnaGVhZGVyLW9wYWNpdHktb24nKTtcclxuXHRcdFx0XHRtZWdhTWVudUNvbnRhaW5lci5yZW1vdmVDbGFzcygnY29udGFpbmVyJyk7XHJcblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRsb2dvSW1nLmF0dHIoJ3NyYycsIGxvZ29TcmMpO1xyXG5cdFx0XHRcdG5hdmlrSGVhZGVyLnJlbW92ZUNsYXNzKCd2aWV3cG9ydC1zbScpO1xyXG5cdFx0XHRcdG5hdmlrSGVhZGVyLmFkZENsYXNzKCd2aWV3cG9ydC1sZycpO1xyXG5cdFx0XHRcdGhlYWRlclRyYW5zcGFyZW50LmFkZENsYXNzKCdoZWFkZXItdHJhbnNwYXJlbnQtb24nKTtcclxuXHRcdFx0XHRoZWFkZXJPcGFjaXR5LmFkZENsYXNzKCdoZWFkZXItb3BhY2l0eS1vbicpO1xyXG5cdFx0XHRcdG1lZ2FNZW51Q29udGFpbmVyLmFkZENsYXNzKCdjb250YWluZXInKTtcclxuXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHN0aWNreU5hdigpO1xyXG5cclxuXHRcdH0pLnJlc2l6ZSgpO1xyXG5cclxuXHRcdC8qID09PT09PT09PT0gRHJvcGRvd24gTWVudSBUb2dnbGUgPT09PT09PT09PSAqL1xyXG5cdFx0YnVyZ2VyTWVudS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ21lbnUtb3BlbicpO1xyXG5cdFx0XHRuYXZpa01lbnVMaXN0V3JhcHBlci5zbGlkZVRvZ2dsZSgzMDApO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdG5hdmlrTWVudUxpc3REcm9wZG93bi5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdCQodGhpcykuYXBwZW5kKCAnPHNwYW4gY2xhc3M9XCJkcm9wZG93bi1wbHVzXCI+PC9zcGFuPicgKTtcclxuXHRcdFx0JCh0aGlzKS5hZGRDbGFzcygnZHJvcGRvd25fbWVudScpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdCQoJy5kcm9wZG93bi1wbHVzJykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkKHRoaXMpLnByZXYoJ3VsJykuc2xpZGVUb2dnbGUoMzAwKTtcclxuXHRcdFx0JCh0aGlzKS50b2dnbGVDbGFzcygnZHJvcGRvd24tb3BlbicpO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdCQoJy5kcm9wZG93bl9tZW51IGEnKS5hcHBlbmQoJzxzcGFuPjwvc3Bhbj4nKTtcclxuXHJcblx0XHQvKiA9PT09PT09PT09IEFkZGVkIGhlYWRlciBzaGFkb3cgPT09PT09PT09PSAqL1xyXG5cdFx0aGVhZGVyU2hhZG93LmFwcGVuZCgnPGRpdiBjbGFzcz1cImhlYWRlci1zaGFkb3ctd3JhcHBlclwiPjwvZGl2PicpO1xyXG5cclxuXHRcdC8qID09PT09PT09PT0gU3RpY2t5IG9uIHNjcm9sbCA9PT09PT09PT09ICovXHJcblx0XHQkKHdpbmRvdykub24oXCJzY3JvbGxcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHN0aWNreU5hdigpO1xyXG5cdFx0fSkuc2Nyb2xsKCk7XHJcblxyXG5cdFx0LyogPT09PT09PT09PSBNZW51IGhvdmVyIHRyYW5zaXRpb24gPT09PT09PT09PSAqL1xyXG5cdFx0dmFyIGxpc3RNZW51SG92ZXI0ID0gJCgnLm5hdmlrLW1lbnUubWVudS1ob3Zlci00ID4gdWwgPiBsaSA+IGEnKTtcclxuXHRcdGxpc3RNZW51SG92ZXI0LmFwcGVuZCgnPGRpdiBjbGFzcz1cImhvdmVyLXRyYW5zaXRpb25cIj48L2Rpdj4nKTtcclxuXHJcblx0fVxyXG5cclxuXHQvKiA9PT09PT09PT09IE92ZXJsYXkgbmF2aWdhdGlvbiBtZW51ID09PT09PT09PT0gKi9cclxuXHRpZiAoJCgnLm5hdmlrLWhlYWRlci1vdmVybGF5JykubGVuZ3RoKSB7XHJcblxyXG5cdFx0dmFyIG5hdmlrSGVhZGVyT3ZlcmxheSA9ICQoJy5uYXZpay1oZWFkZXItb3ZlcmxheScpLFxyXG5cdFx0XHRuYXZpa01lbnVPdmVybGF5ID0gJCgnLm5hdmlrLW1lbnUtb3ZlcmxheScpLFxyXG5cdFx0XHRidXJnZXJNZW51T3ZlcmxheSA9IG5hdmlrSGVhZGVyT3ZlcmxheS5maW5kKCcuYnVyZ2VyLW1lbnUnKSxcclxuXHRcdFx0bGluZU1lbnVPdmVybGF5ID0gbmF2aWtIZWFkZXJPdmVybGF5LmZpbmQoJy5saW5lLW1lbnUnKSxcclxuXHRcdFx0bWVudU92ZXJsYXlMb2dvID0gbmF2aWtIZWFkZXJPdmVybGF5LmZpbmQoJy5sb2dvJyksXHJcblx0XHRcdG92ZXJsYXlMb2dvQ2xvbmUgPSBtZW51T3ZlcmxheUxvZ28uY2xvbmUoKSxcclxuXHRcdFx0bWVudVdyYXBwZXJMb2dvU3JjID0gbWVudU92ZXJsYXlMb2dvLmRhdGEoJ292ZXJsYXktbG9nbycpLFxyXG5cdFx0XHRtZW51T3ZlcmxheUxpc3REcm9wZG93biA9ICQoJy5uYXZpay1tZW51LW92ZXJsYXkgPiB1bCA+IGxpOmhhcyh1bCknKSxcclxuXHRcdFx0bWVudU92ZXJsYXlMaW5rID0gJCgnLm5hdmlrLW1lbnUtb3ZlcmxheSA+IHVsID4gbGkgPiBhJyksXHJcblx0XHRcdG1lbnVTbGlkZSA9ICQoJy5uYXZpay1oZWFkZXItb3ZlcmxheS5tZW51LXNsaWRlJyksXHJcblx0XHRcdG1lbnVTbGlkZVN1Ym1lbnVMaW5rID0gbWVudVNsaWRlLmZpbmQoJy5uYXZpay1tZW51LW92ZXJsYXkgPiB1bCB1bCBhJyksXHJcblx0XHRcdG1lbnVTbGlkZVN1Ym1lbnVEcm9wZG93biA9IG1lbnVTbGlkZS5maW5kKCcubmF2aWstbWVudS1vdmVybGF5ID4gdWwgPiBsaSA+IHVsIGxpOmhhcyh1bCknKSxcclxuXHRcdFx0bWVudVNvY2lhbE1lZGlhID0gbmF2aWtNZW51T3ZlcmxheS5uZXh0KCcubWVudS1zb2NpYWwtbWVkaWEnKSxcclxuXHRcdFx0c3VibWVudVZlcnRpY2FsTGlzdEl0ZW0gPSAkKCcuc3VibWVudS12ZXJ0aWNhbCA+IHVsID4gbGkgPiB1bCBsaTpoYXModWwpJyksXHJcblx0XHRcdHN1Ym1lbnVWZXJ0aWNhbExpbmsgPSAkKCcuc3VibWVudS12ZXJ0aWNhbCA+IHVsID4gbGkgPiB1bCBhJyk7XHJcblxyXG5cdFx0bGluZU1lbnVPdmVybGF5LndyYXBBbGwoJzxzcGFuPjwvc3Bhbj4nKTtcclxuXHRcdG1lbnVPdmVybGF5TGluay53cmFwKCc8ZGl2IGNsYXNzPVwibWVudS1vdmVybGF5LWxpbmtcIj48L2Rpdj4nKTtcclxuXHRcdHN1Ym1lbnVWZXJ0aWNhbExpbmsud3JhcCgnPGRpdiBjbGFzcz1cIm1lbnUtb3ZlcmxheS1saW5rXCI+PC9kaXY+Jyk7XHJcblx0XHRtZW51U2xpZGVTdWJtZW51TGluay53cmFwKCc8ZGl2IGNsYXNzPVwibWVudS1vdmVybGF5LWxpbmtcIj48L2Rpdj4nKTtcclxuXHJcblx0XHQvKiA9PT09PT09PT09IFN1Ym1lbnUgVG9nZ2xlID09PT09PT09PT0gKi9cclxuXHRcdG1lbnVPdmVybGF5TGlzdERyb3Bkb3duLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIG1lbnVPdmVybGF5RHJvcGRvd25MaW5rID0gJCh0aGlzKS5jaGlsZHJlbignLm1lbnUtb3ZlcmxheS1saW5rJyk7XHJcblx0XHRcdG1lbnVPdmVybGF5RHJvcGRvd25MaW5rLnByZXBlbmQoICc8c3BhbiBjbGFzcz1cIm92ZXJsYXktZHJvcGRvd24tcGx1c1wiPjwvc3Bhbj4nICk7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ292ZXJsYXlfZHJvcGRvd25fbWVudScpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0c3VibWVudVZlcnRpY2FsTGlzdEl0ZW0uZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgc3VibWVudVZlcnRpY2FsRHJvcGRvd25MaW5rID0gJCh0aGlzKS5jaGlsZHJlbignLm1lbnUtb3ZlcmxheS1saW5rJyk7XHJcblx0XHRcdHN1Ym1lbnVWZXJ0aWNhbERyb3Bkb3duTGluay5wcmVwZW5kKCAnPHNwYW4gY2xhc3M9XCJvdmVybGF5LWRyb3Bkb3duLXBsdXNcIj48L3NwYW4+JyApO1xyXG5cdFx0XHQkKHRoaXMpLmFkZENsYXNzKCdvdmVybGF5X2Ryb3Bkb3duX21lbnUnKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG1lbnVTbGlkZVN1Ym1lbnVEcm9wZG93bi5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0XHRcdHZhciBzdWJtZW51VmVydGljYWxEcm9wZG93bkxpbmsgPSAkKHRoaXMpLmNoaWxkcmVuKCcubWVudS1vdmVybGF5LWxpbmsnKTtcclxuXHRcdFx0c3VibWVudVZlcnRpY2FsRHJvcGRvd25MaW5rLnByZXBlbmQoICc8c3BhbiBjbGFzcz1cIm92ZXJsYXktZHJvcGRvd24tcGx1c1wiPjwvc3Bhbj4nICk7XHJcblx0XHRcdCQodGhpcykuYWRkQ2xhc3MoJ292ZXJsYXlfZHJvcGRvd25fbWVudScpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLm92ZXJsYXlfZHJvcGRvd25fbWVudSA+IHVsJykuYWRkQ2xhc3MoJ292ZXJsYXktc3VibWVudS1jbG9zZScpO1xyXG5cdFx0XHJcblx0XHQkKCcub3ZlcmxheS1kcm9wZG93bi1wbHVzJykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG5cdFx0XHR2YXIgJHRoaXNQYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgnLm1lbnUtb3ZlcmxheS1saW5rJyk7XHJcblx0XHRcdCR0aGlzUGFyZW50Lm5leHQoJ3VsJykuc2xpZGVUb2dnbGUoMzAwKS50b2dnbGVDbGFzcygnb3ZlcmxheS1zdWJtZW51LWNsb3NlJyk7XHJcblx0XHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ292ZXJsYXktZHJvcGRvd24tb3BlbicpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmF2aWtNZW51T3ZlcmxheS5hZGQobWVudVNvY2lhbE1lZGlhKS53cmFwQWxsKCc8ZGl2IGNsYXNzPVwibmF2LW1lbnUtd3JhcHBlclwiPjwvZGl2PicpO1xyXG5cclxuXHRcdHZhciBvdmVybGF5TmF2TWVudVdyYXBwZXIgPSAkKCcubmF2LW1lbnUtd3JhcHBlcicpO1xyXG5cclxuXHRcdG92ZXJsYXlOYXZNZW51V3JhcHBlci5wcmVwZW5kKG92ZXJsYXlMb2dvQ2xvbmUpO1xyXG5cdFx0b3ZlcmxheU5hdk1lbnVXcmFwcGVyLmZpbmQoJy5sb2dvIGltZycpLmF0dHIoJ3NyYycsIG1lbnVXcmFwcGVyTG9nb1NyYyk7XHJcblxyXG5cdFx0dmFyIG1lbnVPdmVybGF5SG92ZXIgPSAkKCcubmF2aWstbWVudS1vdmVybGF5ID4gdWwgPiAub3ZlcmxheV9kcm9wZG93bl9tZW51ID4gdWwnKTtcclxuXHJcblx0XHRtZW51T3ZlcmxheUhvdmVyLmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0JCh0aGlzKS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQodGhpcykucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwib3ZlcmxheS1tZW51LWhvdmVyXCIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0JCh0aGlzKS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQodGhpcykucGFyZW50cyhcImxpXCIpLnJlbW92ZUNsYXNzKFwib3ZlcmxheS1tZW51LWhvdmVyXCIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qID09PT09PT09PT0gTWVudSBvdmVybGF5IG9wZW4gPT09PT09PT09PSAqL1xyXG5cdFx0YnVyZ2VyTWVudU92ZXJsYXkub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG5cclxuXHRcdFx0dmFyIG92ZXJsYXlNZW51TGlzdCA9ICQoJy5uYXZpay1tZW51LW92ZXJsYXkgPiB1bCA+IGxpJyk7XHJcblxyXG5cdFx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdtZW51LW9wZW4nKTtcclxuXHRcdFx0b3ZlcmxheU5hdk1lbnVXcmFwcGVyLnRvZ2dsZUNsYXNzKCdvdmVybGF5LW1lbnUtb3BlbicpO1xyXG5cdFx0XHRvdmVybGF5TWVudUxpc3QucmVtb3ZlQ2xhc3MoXCJtZW51U2xpZGVJblwiKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICgkKHRoaXMpLmhhc0NsYXNzKFwibWVudS1vcGVuXCIpKSB7XHJcblx0XHRcdFx0b3ZlcmxheU1lbnVUcmFuc2l0aW9uKCk7XHJcblx0XHRcdFx0b3ZlcmxheU1lbnVMaXN0LnJlbW92ZUNsYXNzKFwibWVudVNsaWRlT3V0XCIpLmFkZENsYXNzKFwibWVudUZhZGVcIik7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICghJCh0aGlzKS5oYXNDbGFzcyhcIm1lbnUtb3BlblwiKSkge1xyXG5cdFx0XHRcdG92ZXJsYXlNZW51TGlzdC5hZGRDbGFzcyhcIm1lbnVTbGlkZU91dFwiKS5yZW1vdmVDbGFzcyhcIm1lbnVGYWRlXCIpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyogPT09PT09PT09PSBNZW51IHNsaWRlIHNldHRpbmdzID09PT09PT09PT0gKi9cclxuXHRcdHZhciBtZW51U2xpZGVOYXZXcmFwcGVyID0gbWVudVNsaWRlLmZpbmQoJy5uYXYtbWVudS13cmFwcGVyJyksXHJcblx0XHRcdG1lbnVTbGlkZU5hdkxvZ28gPSBtZW51U2xpZGVOYXZXcmFwcGVyLmZpbmQoJy5sb2dvJyk7XHJcblxyXG5cdFx0aWYgKG5hdmlrSGVhZGVyT3ZlcmxheS5oYXNDbGFzcygnbWVudS1zbGlkZScpKXtcclxuXHRcdFx0bmF2aWtIZWFkZXJPdmVybGF5LnJlbW92ZUNsYXNzKCdvdmVybGF5LWNlbnRlci1tZW51Jyk7XHJcblx0XHR9XHJcblxyXG5cdFx0bWVudVNsaWRlTmF2TG9nby5yZW1vdmUoKTtcclxuXHRcdG1lbnVTbGlkZU5hdldyYXBwZXIuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJzbGlkZW1lbnUtYmctb3ZlcmxheVwiPjwvZGl2PicpO1xyXG5cclxuXHRcdCQoJy5zbGlkZW1lbnUtYmctb3ZlcmxheScpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuXHRcdFx0bWVudVNsaWRlTmF2V3JhcHBlci5yZW1vdmVDbGFzcygnb3ZlcmxheS1tZW51LW9wZW4nKTtcclxuXHRcdFx0YnVyZ2VyTWVudU92ZXJsYXkucmVtb3ZlQ2xhc3MoJ21lbnUtb3BlbicpO1xyXG5cdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0LyogPT09PT09PT09PSBGaXhlZCBzaWRlYmFyIG1lbnUgPT09PT09PT09PSAqL1xyXG5cdGlmICgkKCcubmF2aWstZml4ZWQtc2lkZWJhcicpLmxlbmd0aCkge1xyXG5cdFx0dmFyIG5hdmlrRml4ZWRTaWRlYmFyID0gJCgnLm5hdmlrLWZpeGVkLXNpZGViYXInKSxcclxuXHRcdFx0bmF2aWtNZW51Rml4ZWQgPSAkKCcubmF2aWstbWVudS1maXhlZCcpLFxyXG5cdFx0XHRuYXZpa1NpZGVDb250ZW50ID0gJCgnLm5hdmlrLXNpZGUtY29udGVudCcpLFxyXG5cdFx0XHRsb2dvRml4ZWRTaWRlYmFyID0gbmF2aWtGaXhlZFNpZGViYXIuZmluZCgnLmxvZ28nKSxcclxuXHRcdFx0bG9nb0Nsb25lID0gbG9nb0ZpeGVkU2lkZWJhci5jbG9uZSgpLFxyXG5cdFx0XHRidXJnZXJNZW51Rml4ZWRTaWRlYmFyID0gbmF2aWtGaXhlZFNpZGViYXIuZmluZCgnLmJ1cmdlci1tZW51JyksXHJcblx0XHRcdGJ1cmdlck1lbnVEZXRhY2ggPSBidXJnZXJNZW51Rml4ZWRTaWRlYmFyLmRldGFjaCgpLFxyXG5cdFx0XHRuYXZpa0ZpeGVkRHJvcGRvd24gPSBuYXZpa01lbnVGaXhlZC5maW5kKCdsaTpoYXModWwpJyk7XHJcblxyXG5cdFx0bmF2aWtGaXhlZFNpZGViYXIucGFyZW50KCdib2R5JykuYWRkQ2xhc3MoJ2JvZHktZml4ZWQtc2lkZWJhcicpO1xyXG5cdFx0bmF2aWtGaXhlZFNpZGViYXIuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJmaXhlZHNpZGViYXItYmctb3ZlcmxheVwiPjwvZGl2PicpLmFmdGVyKGJ1cmdlck1lbnVEZXRhY2gpO1xyXG5cdFx0bmF2aWtTaWRlQ29udGVudC5wcmVwZW5kKGxvZ29DbG9uZSk7XHJcblxyXG5cdFx0JCgnLm5hdmlrLWZpeGVkLXNpZGViYXIgLmxvZ28sIC5uYXZpay1tZW51LWZpeGVkJykud3JhcEFsbCgnPGRpdiBjbGFzcz1cImZpeGVkLW1lbnUtd3JhcFwiPjwvZGl2PicpO1xyXG5cclxuXHRcdHZhciBidXJnZXJNZW51TW92ZSA9IG5hdmlrRml4ZWRTaWRlYmFyLm5leHQoJy5idXJnZXItbWVudScpLFxyXG5cdFx0XHRmaXhlZFNpZGViYXJsaW5lTWVudSA9IGJ1cmdlck1lbnVNb3ZlLmZpbmQoJy5saW5lLW1lbnUnKTtcclxuXHJcblx0XHRmaXhlZFNpZGViYXJsaW5lTWVudS53cmFwQWxsKCc8c3Bhbj48L3NwYW4+Jyk7XHJcblxyXG5cdFx0LyogPT09PT09PT09PSBTaWRlIG1lbnUgb3BlbiBvbiBtb2JpbGUgPT09PT09PT09PSAqL1xyXG5cdFx0YnVyZ2VyTWVudU1vdmUub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdtZW51LW9wZW4nKTtcclxuXHRcdFx0bmF2aWtGaXhlZFNpZGViYXIudG9nZ2xlQ2xhc3MoJ2ZpeGVkLXNpZGViYXItb3BlbicpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLmZpeGVkc2lkZWJhci1iZy1vdmVybGF5Jykub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG5cdFx0XHRuYXZpa0ZpeGVkU2lkZWJhci5yZW1vdmVDbGFzcygnZml4ZWQtc2lkZWJhci1vcGVuJyk7XHJcblx0XHRcdGJ1cmdlck1lbnVNb3ZlLnJlbW92ZUNsYXNzKCdtZW51LW9wZW4nKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8qID09PT09PT09PT0gU3VibWVudSBjb2xsYXBzZSA9PT09PT09PT09ICovXHJcblx0XHRuYXZpa0ZpeGVkRHJvcGRvd24uZWFjaChmdW5jdGlvbigpe1xyXG5cdFx0XHQkKHRoaXMpLmFwcGVuZCggJzxzcGFuIGNsYXNzPVwib3ZlcmxheS1kcm9wZG93bi1wbHVzXCI+PC9zcGFuPicgKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJy5vdmVybGF5LWRyb3Bkb3duLXBsdXMnKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdCQodGhpcykucHJldigndWwnKS5zbGlkZVRvZ2dsZSgzMDApLnRvZ2dsZUNsYXNzKCdzdWJtZW51LWNvbGxhcHNlJyk7XHJcblx0XHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ292ZXJsYXktZHJvcGRvd24tb3BlbicpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKiA9PT09PT09PT09IE1lbnUgaWNvbiBjb2xvciA9PT09PT09PT09ICovXHJcblx0JCgnLm5hdmlrLW1lbnUtaWNvbicpLmNzcygnY29sb3InLCBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgaWNvbkNvbG9yQXR0ciA9ICQodGhpcykuZGF0YSgnZmEtY29sb3InKTtcclxuXHRcdHJldHVybiBpY29uQ29sb3JBdHRyO1xyXG5cdH0pO1xyXG5cclxufSk7XHJcbihmdW5jdGlvbigkKSB7XHJcblxyXG5cdC8vIE1lbnUgZmlsdGVyXHJcblx0JChcIiNtZW51LWZpbHRlcnMgbGkgYVwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuXHQgICQoXCIjbWVudS1maWx0ZXJzIGxpIGFcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdCAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgXHJcblx0ICB2YXIgc2VsZWN0ZWRGaWx0ZXIgPSAkKHRoaXMpLmRhdGEoXCJmaWx0ZXJcIik7XHJcblx0ICAvLyAgJChcIiNtZW51LXdyYXBwZXJcIikuZmFkZVRvKDEwMCwgMCk7XHJcbiAgXHJcblx0ICAkKFwiLm1lbnUtcmVzdGF1cmFudFwiKS5mYWRlT3V0KCk7XHJcbiAgXHJcblx0ICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0JChzZWxlY3RlZEZpbHRlcikuc2xpZGVEb3duKCk7XHJcblx0XHQvLyQoXCIjbWVudS13cmFwcGVyXCIpLmZhZGVUbygzMDAsIDEpO1xyXG5cdCAgfSwgMzAwKTtcclxuXHR9KTtcclxuICBcclxuXHR9KShqUXVlcnkpO1xyXG4gIFxyXG4gICBcclxuICAvLyBwb3N0XHJcblxyXG4gIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY29udGFjdEZvcm0nKTtcclxuICAgIGNvbnN0IGlucHV0cyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcmVxdWlyZWRdLCB0ZXh0YXJlYVtyZXF1aXJlZF0sIHNlbGVjdFtyZXF1aXJlZF0nKTtcclxuXHJcbiAgICAvL3d5xYLEhWN6YW15IGRvbXnFm2xuxIUgd2FsaWRhY2rEmVxyXG4gICAgZm9ybS5zZXRBdHRyaWJ1dGUoJ25vdmFsaWRhdGUnLCB0cnVlKTtcclxuXHJcbiAgICBjb25zdCBkaXNwbGF5RmllbGRFcnJvciA9IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgICAgICBjb25zdCBmaWVsZFJvdyA9IGVsZW0uY2xvc2VzdCgnLmZvcm0tcm93Jyk7XHJcbiAgICAgICAgY29uc3QgZmllbGRFcnJvciA9IGZpZWxkUm93LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1lcnJvcicpO1xyXG4gICAgICAgIGlmIChmaWVsZEVycm9yID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGVsZW0uZGF0YXNldC5lcnJvcjtcclxuICAgICAgICAgICAgY29uc3QgZGl2RXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZGl2RXJyb3IuY2xhc3NMaXN0LmFkZCgnZmllbGQtZXJyb3InKTtcclxuICAgICAgICAgICAgZGl2RXJyb3IuaW5uZXJUZXh0ID0gZXJyb3JUZXh0O1xyXG4gICAgICAgICAgICBmaWVsZFJvdy5hcHBlbmRDaGlsZChkaXZFcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBoaWRlRmllbGRFcnJvciA9IGZ1bmN0aW9uKGVsZW0pIHtcclxuICAgICAgICBjb25zdCBmaWVsZFJvdyA9IGVsZW0uY2xvc2VzdCgnLmZvcm0tcm93Jyk7XHJcbiAgICAgICAgY29uc3QgZmllbGRFcnJvciA9IGZpZWxkUm93LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC1lcnJvcicpO1xyXG4gICAgICAgIGlmIChmaWVsZEVycm9yICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZpZWxkRXJyb3IucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBbLi4uaW5wdXRzXS5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgaGlkZUZpZWxkRXJyb3IodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGVsZW0udHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XHJcbiAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1Sb3cgPSB0aGlzLmNsb3Nlc3QoJy5mb3JtLXJvdycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICBoaWRlRmllbGRFcnJvcih0aGlzKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBjaGVja0ZpZWxkc0Vycm9ycyA9IGZ1bmN0aW9uKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgLy91c3Rhd2lhbXkgem1pZW5uxIUgbmEgdHJ1ZS4gTmFzdMSZcG5pZSByb2JpbXkgcMSZdGzEmSBwbyB3c3p5c3RraWNoIHBvbGFjaFxyXG4gICAgICAgIC8vamXFvGVsaSBrdMOzcmXFmyB6IHDDs2wgamVzdCBixYLEmWRuZSwgcHJ6ZcWCxIVjemFteSB6bWllbm7EhSBuYSBmYWxzZS5cclxuICAgICAgICBsZXQgZmllbGRzQXJlVmFsaWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBbLi4uZWxlbWVudHNdLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgICAgICAgICAgICAgaGlkZUZpZWxkRXJyb3IoZWxlbSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5RmllbGRFcnJvcihlbGVtKTtcclxuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIGZpZWxkc0FyZVZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZpZWxkc0FyZVZhbGlkO1xyXG4gICAgfTtcclxuXHJcbiAgICBcclxufVxyXG5cclxuXHJcblxyXG5cclxue1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250YWN0Rm9ybScpO1xyXG4gICAgY29uc3QgaW5wdXRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtyZXF1aXJlZF0sIHRleHRhcmVhW3JlcXVpcmVkXSwgc2VsZWN0W3JlcXVpcmVkXScpO1xyXG5cclxuICAgIC8vd3nFgsSFY3phbXkgZG9tecWbbG7EhSB3YWxpZGFjasSZXHJcbiAgICBmb3JtLnNldEF0dHJpYnV0ZSgnbm92YWxpZGF0ZScsIHRydWUpO1xyXG5cclxuICAgIGNvbnN0IGRpc3BsYXlGaWVsZEVycm9yID0gZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkUm93ID0gZWxlbS5jbG9zZXN0KCcuZm9ybS1yb3cnKTtcclxuICAgICAgICBjb25zdCBmaWVsZEVycm9yID0gZmllbGRSb3cucXVlcnlTZWxlY3RvcignLmZpZWxkLWVycm9yJyk7XHJcbiAgICAgICAgaWYgKGZpZWxkRXJyb3IgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZWxlbS5kYXRhc2V0LmVycm9yO1xyXG4gICAgICAgICAgICBjb25zdCBkaXZFcnJvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkaXZFcnJvci5jbGFzc0xpc3QuYWRkKCdmaWVsZC1lcnJvcicpO1xyXG4gICAgICAgICAgICBkaXZFcnJvci5pbm5lclRleHQgPSBlcnJvclRleHQ7XHJcbiAgICAgICAgICAgIGZpZWxkUm93LmFwcGVuZENoaWxkKGRpdkVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhpZGVGaWVsZEVycm9yID0gZnVuY3Rpb24oZWxlbSkge1xyXG4gICAgICAgIGNvbnN0IGZpZWxkUm93ID0gZWxlbS5jbG9zZXN0KCcuZm9ybS1yb3cnKTtcclxuICAgICAgICBjb25zdCBmaWVsZEVycm9yID0gZmllbGRSb3cucXVlcnlTZWxlY3RvcignLmZpZWxkLWVycm9yJyk7XHJcbiAgICAgICAgaWYgKGZpZWxkRXJyb3IgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZmllbGRFcnJvci5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFsuLi5pbnB1dHNdLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICBoaWRlRmllbGRFcnJvcih0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZWxlbS50eXBlID09PSBcImNoZWNrYm94XCIpIHtcclxuICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybVJvdyA9IHRoaXMuY2xvc2VzdCgnLmZvcm0tcm93Jyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVGaWVsZEVycm9yKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGNoZWNrRmllbGRzRXJyb3JzID0gZnVuY3Rpb24oZWxlbWVudHMpIHtcclxuICAgICAgICAvL3VzdGF3aWFteSB6bWllbm7EhSBuYSB0cnVlLiBOYXN0xJlwbmllIHJvYmlteSBwxJl0bMSZIHBvIHdzenlzdGtpY2ggcG9sYWNoXHJcbiAgICAgICAgLy9qZcW8ZWxpIGt0w7NyZcWbIHogcMOzbCBqZXN0IGLFgsSZZG5lLCBwcnplxYLEhWN6YW15IHptaWVubsSFIG5hIGZhbHNlLlxyXG4gICAgICAgIGxldCBmaWVsZHNBcmVWYWxpZCA9IHRydWU7XHJcblxyXG4gICAgICAgIFsuLi5lbGVtZW50c10uZm9yRWFjaChlbGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsZW0uY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlRmllbGRFcnJvcihlbGVtKTtcclxuICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlGaWVsZEVycm9yKGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgZmllbGRzQXJlVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmllbGRzQXJlVmFsaWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy9qZcW8ZWxpIHdzenlzdGtpZSBwb2xhIHPEhSBwb3ByYXduZS4uLlxyXG4gICAgICAgIGlmIChjaGVja0ZpZWxkc0Vycm9ycyhpbnB1dHMpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dDpub3QoOmRpc2FibGVkKSwgdGV4dGFyZWE6bm90KDpkaXNhYmxlZCksIHNlbGVjdDpub3QoOmRpc2FibGVkKScpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YVRvU2VuZCA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgICAgICBbLi4uZWxlbWVudHNdLmZvckVhY2goZWwgPT4gZGF0YVRvU2VuZC5hcHBlbmQoZWwubmFtZSwgZWwudmFsdWUpKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGZvcm0uZ2V0QXR0cmlidXRlKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gZm9ybS5nZXRBdHRyaWJ1dGUoJ21ldGhvZCcpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3VibWl0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpO1xyXG4gICAgICAgICAgICBzdWJtaXQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzdWJtaXQuY2xhc3NMaXN0LmFkZCgnZWxlbWVudC1pcy1idXN5Jyk7XHJcblxyXG4gICAgICAgICAgICBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICBib2R5OiBkYXRhVG9TZW5kXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJldCA9PiByZXQuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbihyZXQgPT4ge1xyXG4gICAgICAgICAgICAgICAgc3VibWl0LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBzdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudC1pcy1idXN5Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJldC5lcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXQuZXJyb3JzLm1hcChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1tuYW1lPVwiJytlbCsnXCJdJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9yID0gcmV0LmVycm9ycy5qb2luKCcsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tGaWVsZHNFcnJvcnMoZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHNla2VjdG9yKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0LnN0YXR1cyA9PT0gJ29rJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3d5xZt3aWV0bGFteSBrb211bmlrYXQgcG93b2R6ZW5pYSwgY2llc3p5bXkgc2llXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnZm9ybS1zZW5kLXN1Y2Nlc3MnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSAnPHN0cm9uZz5XaWFkb21vxZvEhyB6b3N0YcWCYSB3eXPFgmFuYTwvc3Ryb25nPjxzcGFuPkR6acSZa3VqZW15IHphIGtvbnRha3QuIFBvc3RhcmFteSBzacSZIG9kcG93aWVkemllxIcgamFrIG5hanN6eWJjaWVqPC9zcGFuPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZGl2LCBmb3JtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXQuc3RhdHVzID09PSAnZXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8va29tdW5pa2F0IGLFgsSZZHUsIG5pZXBvd29kemVuaWFcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdzZW5kLWVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lclRleHQgPSAnV3lzxYJhbmllIHdpYWRvbW/Fm2NpIHNpxJkgbmllIHBvd2lvZMWCbyc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5jYXRjaChfID0+IHtcclxuICAgICAgICAgICAgICAgIHN1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgc3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnQtaXMtYnVzeScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);